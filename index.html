<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>森のおみくじ | Tea Merry</title>

<link rel="preload" as="image" href="bg_forest.png">
<link rel="preload" as="image" href="card_base.png">
<link rel="preload" as="image" href="fairy.png">
<link rel="preload" as="image" href="buddy.png">
<link rel="preload" as="image" href="balloon.png">
<link rel="preload" as="image" href="cup.png">
<link rel="preload" as="image" href="okawari.png">
<link rel="preload" as="image" href="home_sign.png">

<style>
  :root{ --ink:#523a2a; --shadow:0 10px 18px rgba(60,45,34,.25); }
  *{ box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
  html,body{ height:100%; }
  body{
    margin:0; color:var(--ink);
    font-family: system-ui, -apple-system, "Noto Sans JP", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
    background:url('bg_forest.png') center/cover no-repeat fixed;
    display:grid; place-items:center;
  }

  .app{ width:min(420px,100vw); height:100dvh; position:relative; overflow:hidden; }
  .stage{ position:absolute; inset:0; display:grid; grid-template-rows:1fr auto; padding:16px; }
  .center{ position:relative; display:grid; place-items:center; height:100%; }

  .card{
    position:absolute; top:64px; left:50%; transform:translateX(-50%);
    width:82%; max-width:360px; opacity:0; z-index:2; transform-origin:50% 85%;
  }
  .card img{ width:100%; display:block; }
  .t1{ position:absolute; inset:0; padding:20px 20px 6px; display:grid; align-content:start;
       font-weight:800; line-height:1.15; font-size:clamp(22px,6vw,28px); }
  .t2{ position:absolute; left:20px; right:20px; bottom:16px; line-height:1.72;
       font-size:clamp(13px,4.2vw,15.5px); }

  .balloon{ position:absolute; top:46%; right:6.5%; width:58%; max-width:280px; opacity:0; z-index:4; }
  .balloonText{ position:absolute; top:49%; right:10%; width:54%; max-width:260px; padding:14px 10px;
                text-align:center; font-weight:700; opacity:0; z-index:5; }
  .talkerA{ position:absolute; top:74px; right:18px; width:86px; opacity:0; z-index:3;
            filter:drop-shadow(0 8px 16px rgba(71,52,41,.22)); }
  .talkerB{ position:absolute; top:52%; right:5%; width:100px; opacity:0; z-index:5;
            filter:drop-shadow(0 8px 16px rgba(71,52,41,.22)); }

  /* カップ（前面に） */
  .cup{
    position:absolute; left:50%; bottom:106px; transform:translateX(-50%);
    width:64%; cursor:pointer; filter:drop-shadow(var(--shadow)); z-index:2;
  }
  .cup:active{ transform:translateX(-50%) translateY(1px) scale(.996); }

  /* クリックヒント：JSで位置を決める。タップを邪魔しない */
  .hint{
    position:absolute; left:50%; transform:translateX(-50%);
    padding:8px 12px; border-radius:999px;
    color:#5a3b25; background:rgba(255,255,255,.9);
    font-weight:700; font-size:14px; letter-spacing:.02em;
    box-shadow:0 6px 14px rgba(71,52,41,.12);
    animation:hintPulse 1.8s ease-in-out infinite;
    z-index:1; pointer-events:none;  /* ← これでカップがクリック可に */
  }
  @keyframes hintPulse{
    0%,100%{ transform:translateX(-50%) translateY(0); opacity:.95 }
    50%{    transform:translateX(-50%) translateY(-2px); opacity:1 }
  }

  /* CSS湯気 */
  .steam{
    position:absolute; left:50%; bottom:calc(106
