<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>森のおみくじ | Tea Merry</title>
  <style>
    /* ---- Reset 最小限 ---- */
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family: "Hiragino Kaku Gothic ProN", "Yu Gothic", Meiryo, system-ui, -apple-system, sans-serif;color:#4b2e23;background:#f4f0e8}

    /* ---- 背景 ---- */
    .stage{
      position:relative;
      min-height:100svh; /* モバイルでアドレスバー縮み対応 */
      overflow:hidden;
      background: url("./bg_forest.png") center / cover no-repeat fixed;
      /* iOSのチラつき対策 */
      transform: translateZ(0);
    }

    /* 小妖精（常に画面固定） */
    .fairy-fixed{
      position:fixed;
      z-index:30;
      inset: clamp(8px,2svh,16px) auto auto clamp(8px,3svw,16px); /* 上左 */
      width: clamp(64px, 10svw, 92px);
      pointer-events:none;
      filter: drop-shadow(0 2px 2px rgba(0,0,0,.15));
    }

    /* カードは画面の一番上にピッタリ固定（スクロールしても最上） */
    .omikuji-card{
      position:absolute;
      z-index:20;
      top: 0;          /* ← ここが“てっぺん” */
      left: 50%;
      transform: translateX(-50%);
      width: min(92vw, 520px);
      margin-top: clamp(8px, 2svh, 16px); /* ほんの少しだけ余白。不要なら0に */
    }
    .card-img{
      width:100%;
      height:auto;
      display:block;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.18));
    }
    .card-text{
      position:absolute;
      inset: 10% 8% 22% 8%; /* 画像の内側に文字を置く */
      color:#5b3b28;
      line-height:1.7;
      font-size: clamp(16px, 2.6vw, 22px);
    }
    .card-title{
      font-weight:700;
      font-size: clamp(24px, 4.8vw, 36px);
      letter-spacing:.04em;
      margin:0 0 .3em;
    }

    /* カップ・吹き出し・犬の位置 */
    .cup{
      position:absolute;
      z-index:10;
      left:50%;
      transform: translateX(-50%);
      bottom: clamp(18svh, 22svh, 26svh); /* カップの“ベース高さ” */
      width: min(70vw, 520px);
      pointer-events:auto;
      touch-action:manipulation;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.22));
    }

    .bubble-wrap{
      position:absolute;
      z-index:15;
      right: clamp(4vw, 6vw, 8vw);
      /* カップの“上”に来るよう底辺を合わせる */
      bottom: clamp(30svh, 34svh, 38svh);
      width: min(68vw, 500px);
    }
    .bubble-img{ width:100%; height:auto; display:block; filter: drop-shadow(0 4px 8px rgba(0,0,0,.18));}
    .bubble-text{
      position:absolute;
      inset: 24% 12% 20% 16%;
      color:#5b3b28;
      font-size: clamp(18px, 3.4vw, 24px);
      line-height:1.6;
    }

    .dog{
      position:absolute;
      z-index:16;
      left: clamp(3vw, 6vw, 10vw);
      bottom: clamp(24svh, 28svh, 32svh);
      width: clamp(64px, 14svw, 120px);
      filter: drop-shadow(0 3px 6px rgba(0,0,0,.18));
      pointer-events:none;
    }

    /* ボタン群（下） */
    .footer-ui{
      position:absolute;
      z-index:25;
      left:0; right:0;
      bottom: clamp(10px, 2.6svh, 20px);
      display:flex;
      gap: clamp(12px, 3vw, 20px);
      justify-content:center;
      align-items:center;
      padding: 0 clamp(10px, 3vw, 24px);
    }
    .btn{
      -webkit-tap-highlight-color: transparent;
      border:0;
      background: none;
      padding:0;
      cursor:pointer;
    }
    .btn img{display:block; height: clamp(48px, 8svh, 64px); width:auto}

    /* ---- PC 調整 ---- */
    @media (min-width: 900px){
      .omikuji-card{ width:min(560px, 42vw);}
      .cup{ width:min(560px, 44vw); bottom: 18svh;}
      .bubble-wrap{ width:min(520px, 40vw); right: 10vw; bottom: 24svh;}
      .dog{ left: 12vw; bottom: 21svh;}
    }
  </style>
</head>
<body>
  <main class="stage">

    <!-- 小妖精（固定） -->
    <img class="fairy-fixed" src="./fairy.png" alt="森の小妖精">

    <!-- おみくじカード（最上部） -->
    <section class="omikuji-card" aria-label="おみくじ結果">
      <img class="card-img" src="./omikuji_card.png" alt="">
      <div class="card-text">
        <h1 class="card-title">ティーバッグ<br>末吉</h1>
        <p>
          少し渋い一日。でも、その渋みが深みに変わる前ぶれ。<br>
          お湯の中で静かに広がるように、ゆっくり整っていく運気。
        </p>
      </div>
    </section>

    <!-- 吹き出し（カップの上に固定配置） -->
    <div class="bubble-wrap">
      <img class="bubble-img" src="./balloon.png" alt="">
      <div class="bubble-text">せかさない。湯気のペースで。</div>
    </div>

    <!-- 犬（位置固定でツッコミ） -->
    <img class="dog" src="./dog.png" alt="犬のツッコミ">

    <!-- カップ（中央下寄り） -->
    <img class="cup" src="./cup.png" alt="カップ">

    <!-- 下部ボタン -->
    <nav class="footer-ui" aria-label="操作">
      <button class="btn" id="againBtn" aria-label="おかわり">
        <img src="./btn_okawari.png" alt="おかわり？">
      </button>
      <a class="btn" href="./" aria-label="ホームへ">
        <img src="./btn_home.png" alt="Home">
      </a>
    </nav>

  </main>

  <script>
    // おかわりボタン：ダミー（必要なら差し替え）
    document.getElementById('againBtn')?.addEventListener('click', () => {
      // ここで結果差し替えなどの処理
      // 例）軽くポンっと浮かす
      const card = document.querySelector('.omikuji-card');
      card.style.transition = 'transform .18s ease';
      card.style.transform = 'translateX(-50%) translateY(-6px)';
      setTimeout(()=> card.style.transform = 'translateX(-50%)', 180);
    });
  </script>
</body>
</html>
